(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(30),l=a.n(i),s=a(7),o=a(8),c=a(13),u=a(15),m=a(14),p=(a(88),a(27)),h=a.n(p),d=function e(){var t=this;Object(o.a)(this,e),this.login=function(e){return t.service.post("/login",e)},this.signup=function(e){return t.service.post("/signup",e)},this.logout=function(){return t.service.post("/logout")},this.isLoggedIn=function(){return t.service.get("/loggedin")},this.service=h.a.create({baseURL:"".concat("https://viajar-mola-react.herokuapp.com/api","/auth"),withCredentials:!0})},g=a(11),v=a(125),E=a(126),f=a(124),b=a(12),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).logout=function(){n.AuthService.logout().then((function(){n.props.setTheUser(!1),n.props.handleToast(!0,"Usuario desconectado")})).catch((function(e){return console.log(e)}))},n.AuthService=new d,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(v.a,{className:"nav-hero",variant:"dark",expand:"lg",sticky:"top"},r.a.createElement(v.a.Brand,null,r.a.createElement(b.b,{to:"/"},r.a.createElement("img",{className:"logo",src:"/img/logofinal.png",alt:"#"}))),r.a.createElement(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(v.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(E.a,{className:"ml-auto"},r.a.createElement(E.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/",exact:!0,activeStyle:{color:"white"}},"Inicio")),r.a.createElement(f.a,{title:"Destinos",id:"basic-nav-dropdown"},r.a.createElement(f.a.Item,{href:"/destino/europa"},"Europa"),r.a.createElement(f.a.Divider,null),r.a.createElement(f.a.Item,{href:"/destino/asia"},"Asia"),r.a.createElement(f.a.Divider,null),r.a.createElement(f.a.Item,{href:"/destino/america"},"America")),r.a.createElement(E.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/#",exact:!0},"Sobre Nosotros")),r.a.createElement(E.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/#",exact:!0},r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-telephone-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M2.267.98a1.636 1.636 0 0 1 2.448.152l1.681 2.162c.309.396.418.913.296 1.4l-.513 2.053a.636.636 0 0 0 .167.604L8.65 9.654a.636.636 0 0 0 .604.167l2.052-.513a1.636 1.636 0 0 1 1.401.296l2.162 1.681c.777.604.849 1.753.153 2.448l-.97.97c-.693.693-1.73.998-2.697.658a17.47 17.47 0 0 1-6.571-4.144A17.47 17.47 0 0 1 .639 4.646c-.34-.967-.035-2.004.658-2.698l.97-.969z"}))," +34 666 666")),this.props.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/mi-cuenta",activeStyle:{color:"white"}},"Mi cuenta")),r.a.createElement(E.a.Link,{as:"span"},r.a.createElement("span",{onClick:this.logout},"Cerrar sesi\xf3n"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/registro",activeStyle:{color:"white"}},"Registro")),r.a.createElement(E.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/iniciar-sesion",activeStyle:{color:"white"}},"Inicio sesi\xf3n"))),this.props.loggedInUser&&"admin"===this.props.loggedInUser.role?r.a.createElement(E.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/nuevo-viaje",activeStyle:{color:"white"}},"Nuevo viaje")):null)))}}]),a}(n.Component),y=a(63),j=function(e){var t=e.visible,a=e.text,n=e.handleToast;return r.a.createElement(y.a,{style:{position:"fixed",right:"10px",bottom:"10px",width:"300px",color:"tomato"},show:t,onClose:function(){return n(!1)},delay:5e3,autohide:!0},r.a.createElement(y.a.Header,null," ",r.a.createElement("strong",{className:"mr-auto"},"ViajarMola")," "),r.a.createElement(y.a.Body,null,a))},T=(a(113),a(44)),S=function(){return r.a.createElement("footer",null,r.a.createElement(T.a,null,r.a.createElement("div",{className:"col-lg-4 col-6 text-xs-center "},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-telephone",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{"fill-rule":"evenodd",d:"M3.925 1.745a.636.636 0 0 0-.951-.059l-.97.97c-.453.453-.62 1.095-.421 1.658A16.47 16.47 0 0 0 5.49 10.51a16.471 16.471 0 0 0 6.196 3.907c.563.198 1.205.032 1.658-.421l.97-.97a.636.636 0 0 0-.06-.951l-2.162-1.682a.636.636 0 0 0-.544-.115l-2.052.513a1.636 1.636 0 0 1-1.554-.43L5.64 8.058a1.636 1.636 0 0 1-.43-1.554l.513-2.052a.636.636 0 0 0-.115-.544L3.925 1.745zM2.267.98a1.636 1.636 0 0 1 2.448.153l1.681 2.162c.309.396.418.913.296 1.4l-.513 2.053a.636.636 0 0 0 .167.604L8.65 9.654a.636.636 0 0 0 .604.167l2.052-.513a1.636 1.636 0 0 1 1.401.296l2.162 1.681c.777.604.849 1.753.153 2.448l-.97.97c-.693.693-1.73.998-2.697.658a17.47 17.47 0 0 1-6.571-4.144A17.47 17.47 0 0 1 .639 4.646c-.34-.967-.035-2.004.658-2.698l.97-.969z"}))," +34 666 666"),r.a.createElement("li",null,r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-envelope-open-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M8.941.435a2 2 0 0 0-1.882 0l-6 3.2A2 2 0 0 0 0 5.4v.313l6.709 3.933L8 8.928l1.291.717L16 5.715V5.4a2 2 0 0 0-1.059-1.765l-6-3.2zM16 6.873l-5.693 3.337L16 13.372v-6.5zm-.059 7.611L8 10.072.059 14.484A2 2 0 0 0 2 16h12a2 2 0 0 0 1.941-1.516zM0 13.373l5.693-3.163L0 6.873v6.5z"})),"  viajarmola@viajarmola.com"),r.a.createElement("li",null,r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-clock",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm8-7A8 8 0 1 1 0 8a8 8 0 0 1 16 0z"}),r.a.createElement("path",{"fill-rule":"evenodd",d:"M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"}))," Lun - Vie: 10h-18h"))),r.a.createElement("div",{className:"col-lg-4 col-6 text-xs-center "},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(b.b,{to:"#"},"Preguntas frecuentes")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"#"},"Politica de privacidad")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"#"},"Condiciones generales")))),r.a.createElement("div",{className:"col-lg-4 col-6 text-xs-center "},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(b.b,{to:"#"},"Aviso legal")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"#"},"Recomendar a un amigo")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"#"},"Viajes pasados"))))))},I=a(17),O=a(33),U=a(6),k=a(61),w=a(45),x=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(I.a)({},a,r))},n.handleFormSubmit=function(e){e.preventDefault(),n.authService.signup(n.state).then((function(e){n.props.setTheUser(e.data),n.props.handleToast(!0,"Registro completo"),n.props.history.push("/mi-cuenta")})).catch((function(e){n.props.handleToast(!0,e.response.data.message)}))},n.state={email:"",password:""},n.authService=new d,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(k.a,{className:"mt-5"},r.a.createElement(T.a,null,r.a.createElement(w.a,{md:{offset:3,span:6}},r.a.createElement("h3",{className:"mb-3"},"Registro de usuario"),r.a.createElement(U.a,{onSubmit:this.handleFormSubmit},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Correo electr\xf3nico"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.email,name:"email",type:"text"}),r.a.createElement(U.a.Text,{className:"text-muted"},"Todo minuscula")),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Contrase\xf1a"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password"}),r.a.createElement(U.a.Text,{className:"text-muted"},"Minimo cuatro caracteres")),r.a.createElement(O.a,{variant:"dark",type:"submit"},"Registrarme")))))}}]),a}(n.Component),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(I.a)({},a,r))},n.handleFormSubmit=function(e){e.preventDefault(),n.AuthService.login(n.state).then((function(e){n.props.setTheUser(e.data),n.props.handleToast(!0,"Sesi\xf3n inciada"),n.props.history.push("/mi-cuenta")})).catch((function(e){n.props.handleToast(!0,e.response.data.message)}))},n.state={email:"",password:""},n.AuthService=new d,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{className:"mt-5"},r.a.createElement(T.a,null,r.a.createElement(w.a,{md:{offset:3,span:6}},r.a.createElement("h3",{className:"mb-3"},"Inicio de sesi\xf3n"),r.a.createElement(U.a,{onSubmit:this.handleFormSubmit},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Correo electr\xf3nico"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.email,name:"email",type:"text"}),r.a.createElement(U.a.Text,{className:"text-muted"},"Todo minuscula")),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Contrase\xf1a"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password"}),r.a.createElement(U.a.Text,{className:"text-muted"},"Minimo cuatro caracteres")),r.a.createElement(O.a,{variant:"dark",type:"submit"},"Iniciar sesion"))))))}}]),a}(n.Component),D=a(34),A=(a(114),a(22)),L=function(e){var t=e._id,a=e.image,n=e.title,i=e.duration,l=e.price;return r.a.createElement(A.a,{className:"trip-card"},r.a.createElement(b.b,{to:"/viaje/".concat(t),className:"btn"},r.a.createElement(A.a.Img,{className:"img-card",variant:"top",src:a}),r.a.createElement(A.a.Body,null,r.a.createElement(A.a.Title,null,n),r.a.createElement(A.a.Text,null,i," d\xedas"),r.a.createElement(A.a.Text,null,"Desde ",l," \u20ac"))))},F=function e(){var t=this;Object(o.a)(this,e),this.getAllTrips=function(){return t.service.get("/getAllTrips")},this.getDestination=function(e){return t.service.get("/getDestination/".concat(e))},this.getOneTrips=function(e){return t.service.get("/getOneTrip/".concat(e))},this.createTrips=function(e){return t.service.post("/newTrip",e)},this.deleteTrips=function(e){return t.service.delete("/delete/".concat(e))},this.editTrip=function(e,a){return t.service.put("/edit/".concat(e),a)},this.service=h.a.create({baseURL:"".concat("https://viajar-mola-react.herokuapp.com/api","/trips"),withCredentials:!0})},M=function(){return r.a.createElement("div",{className:"diferentes mt-4"},r.a.createElement("h4",null,"LO QUE REALMENTE NOS HACE DIFERENTES"),r.a.createElement("p",null,"Organizamos cada detalle para que disfrutes al m\xe1ximo de cada visita, de cada experiencia y de cada actividad. Queremos que cada momento sea \xfanico, irrepetible. Que sea, simplemente, genial y diferente. Viajar es un placer y nuestro objetivo es que disfrutes al m\xe1ximo. Nuestro equipo de profesionales organiza los tours en primera persona, sin intermediarios, con un mismo est\xe1ndar y estilo en todos nuestros viajes. Innovando y mejorando la experiencia a\xf1o tras a\xf1o para satisfacer a nuestros clientes. Tours dise\xf1ados con mimo y dedicaci\xf3n para que solamente tengas que concentrarte en una cosa: disfrutar y vivir la experiencia"))},G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getAllTrips(),window.scrollTo(0,0)},n.getAllTrips=function(){n.TripService.getAllTrips().then((function(e){return n.setState({originTrips:e.data,trips:e.data})})).catch((function(e){return console.log(e)}))},n.resetFilter=function(){n.setState({trips:n.state.originTrips,destinyFilter:"",priceFilter:0,tripTypeFilter:""})},n.destinyFilter=function(){var e=Object(D.a)(n.state.trips).filter((function(e){return e.destination===n.state.destinyFilter}));n.setState({trips:e})},n.priceFilter=function(){var e=Object(D.a)(n.state.trips).filter((function(e){return e.price>=n.state.priceFilter}));n.setState({trips:e})},n.tripTypeFilter=function(){var e=Object(D.a)(n.state.trips).filter((function(e){return e.tripType===n.state.tripTypeFilter}));n.setState({trips:e})},n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;"destinyFilter"===a&&n.setState(Object(I.a)({},a,r),(function(){return n.destinyFilter()})),"priceFilter"===a&&n.setState(Object(I.a)({},a,r),(function(){return n.priceFilter()})),"tripTypeFilter"===a&&n.setState(Object(I.a)({},a,r),(function(){return n.tripTypeFilter()}))},n.state={originTrips:[],trips:[],destinyFilter:"",priceFilter:0,tripTypeFilter:""},n.TripService=new F,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home-hero"},r.a.createElement("h1",{className:"text-center"},"Hora de desconectar de la rutina. No hay problema, nosotros nos encargamos de todo. ")),r.a.createElement("div",{className:"texto-parrafo"},r.a.createElement("h6",null,"Los viajes que ofrecemos en Viajar Mola han sido creados en primera persona por profesionales de nuestro equipo cuya pasi\xf3n es viajar. Nosotros los llamamos \u2018viajes artesanales\u2019 porque los planificamos como creemos que t\xfa lo har\xedas. \xbfLo mejor? Incluimos rincones secretos que pocos conocen.")),r.a.createElement(k.a,null,r.a.createElement("h3",{className:"subtitle"},"\xbfQU\xc9 TAL UN POCO DE INSPIRACI\xd3N PARA TU PR\xd3XIMO VIAJE?"),r.a.createElement(T.a,{className:"d-flex"},r.a.createElement(w.a,{lg:4},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Control,{as:"select",onChange:this.handleInputChange,value:this.state.destinyFilter,name:"destinyFilter"},r.a.createElement("option",{value:""},"Selecciona un destino"),r.a.createElement("option",{value:"europa"},"Europa"),r.a.createElement("option",{value:"asia"},"Asia"),r.a.createElement("option",{value:"america"},"Am\xe9rica")))),r.a.createElement(w.a,{lg:4},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Precios desde ",this.state.priceFilter," \u20ac"),r.a.createElement(U.a.Control,{type:"range",name:"priceFilter",min:"0",max:"2500",value:this.state.priceFilter,onChange:this.handleInputChange}))),r.a.createElement(w.a,{lg:4},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Control,{as:"select",onChange:this.handleInputChange,value:this.state.tripTypeFilter,name:"tripTypeFilter"},r.a.createElement("option",{value:""},"Selecciona tipo de viaje"),r.a.createElement("option",{value:"single"},"Single"),r.a.createElement("option",{value:"grupos"},"Grupos"),r.a.createElement("option",{value:"grupo-reducido"},"Grupos reducidos")))),r.a.createElement(w.a,{lg:3},r.a.createElement(O.a,{block:!0,onClick:function(){return e.resetFilter()},variant:"outline-dark",type:"submit"},"Quitar filtro viajes"))),r.a.createElement(T.a,null,this.state.trips.map((function(e,t){return r.a.createElement(w.a,{md:6,lg:4,key:t},r.a.createElement(L,e))})))),r.a.createElement(M,null))}}]),a}(n.Component),B=function e(){var t=this;Object(o.a)(this,e),this.getUser=function(e){return t.service.get("/account/".concat(e))},this.deleteUser=function(e){return t.service.delete("/account/delete/".concat(e))},this.editUser=function(e,a){return t.service.put("/account/edit/".concat(e),a)},this.service=h.a.create({baseURL:"".concat("https://viajar-mola-react.herokuapp.com/api","/user"),withCredentials:!0})},R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getUser(),n.props.loggedInUser&&n.setState(Object(s.a)(Object(s.a)({},n.state),{},{user:{email:n.props.loggedInUser.email?n.props.loggedInUser.email:"",phone:n.props.loggedInUser.phone?n.props.loggedInUser.phone:"",name:n.props.loggedInUser.name?n.props.loggedInUser.name:"",lastname:n.props.loggedInUser.lastname?n.props.loggedInUser.lastname:""}}))},n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState({user:Object(s.a)(Object(s.a)({},n.state.user),{},Object(I.a)({},a,r))})},n.handleFormSubmit=function(e){e.preventDefault(),n.UserService.editUser(n.props.loggedInUser._id,n.state.user).then((function(e){n.props.handleToast(!0,"Usuario modificado")})).catch((function(e){n.props.handleToast(!0,e.response.data.message)}))},n.getUser=function(){n.UserService.getUser(n.props.loggedInUser._id).then((function(e){return n.setState({userWithBooking:e.data})})).catch((function(e){return console.log(e)}))},n.deleteBooking=function(e){var t=n.state.userWithBooking.booking;t.splice(e,1),n.UserService.editUser(n.props.loggedInUser._id,{booking:t}).then((function(){return n.getUser()})).then((function(){n.props.handleToast(!0,"Reserva eliminada")})).catch((function(e){return console.log(e)}))},n.state={userWithBooking:null,user:{email:"",phone:"",name:"",lastname:""}},n.UserService=new B,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(k.a,{className:"my-5"},r.a.createElement("div",null,r.a.createElement("h1",{className:"text-center mb-5"},"Tu Perfil"),r.a.createElement(U.a,{onSubmit:this.handleFormSubmit,style:{maxWidth:400,margin:"auto"}},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Correo electr\xf3nico"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.user.email,name:"email",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Telefono"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.user.phone,name:"phone",type:"number"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Nombre"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.user.name,name:"name",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Apellido"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.user.lastname,name:"lastname",type:"text"})),r.a.createElement(O.a,{variant:"dark",size:"md",style:{marginBottom:40},block:!0,type:"submit"},"Editar usuario")),this.props.loggedInUser&&"cliente"===this.props.loggedInUser.role?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null," Reservas"),this.state.userWithBooking?r.a.createElement(T.a,null,this.state.userWithBooking.booking.map((function(t,a){return r.a.createElement(w.a,{key:t._id,xs:12,md:4,lg:3},r.a.createElement(L,t.trip[0]),r.a.createElement(O.a,{variant:"danger",className:"mr-3",onClick:function(){return e.deleteBooking(a)}},"Eliminar viaje"))}))):r.a.createElement("h3",null,"CARGANDO")):null))}}]),a}(n.Component),_=function e(){var t=this;Object(o.a)(this,e),this.handleUpload=function(e){return t.service.post("/upload",e)},this.service=h.a.create({baseURL:"".concat("https://viajar-mola-react.herokuapp.com/api","/files"),withCredentials:!0})},z=function(e){var t=e.activityPhoto,a=e.activityTitle,n=e.activityDescription;return r.a.createElement(A.a,{className:"mb-4"},r.a.createElement(A.a.Img,{variant:"top",src:t,className:"img-card"}),r.a.createElement(A.a.Body,null,r.a.createElement(A.a.Title,null,a),r.a.createElement(A.a.Text,null,n)))},P=a(123),V=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleModal=function(e){return n.setState({showModal:e})},n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;"inputSteps"===a?n.setState({inputSteps:r}):"activityTitle"===a||"activityDescription"===a?n.setState({inputActivities:Object(s.a)(Object(s.a)({},n.state.inputActivities),{},Object(I.a)({},a,r))}):n.setState({trip:Object(s.a)(Object(s.a)({},n.state.trip),{},Object(I.a)({},a,r))})},n.handleFileUpload=function(e,t){var a=new FormData;a.append("imageUrl",e.target.files[0]),n.filesService.handleUpload(a).then((function(e){console.log("Subida de archivo finalizada! La URL de Cloudinray es: ",e.data.secure_url),"gallery"===t?n.setState({trip:Object(s.a)(Object(s.a)({},n.state.trip),{},{informationGallery:e.data.secure_url})}):"photo"===t?n.setState({inputActivities:Object(s.a)(Object(s.a)({},n.state.inputActivities),{},{activityPhoto:e.data.secure_url})}):n.setState({trip:Object(s.a)(Object(s.a)({},n.state.trip),{},{image:e.data.secure_url})})})).catch((function(e){return console.log(e)}))},n.handleFormSubmit=function(e){e.preventDefault(),n.TripService.createTrips(n.state.trip).then((function(e){n.props.handleToast(!0,"viaje creado"),n.cleanState()})).catch((function(e){n.props.handleToast(!0,e.response.data.message)}))},n.addTripSteps=function(){var e=Object(D.a)(n.state.trip.steps);e.push(n.state.inputSteps),n.setState({trip:Object(s.a)(Object(s.a)({},n.state.trip),{},{steps:e})}),n.setState({inputSteps:""})},n.deleteStep=function(e){var t=Object(D.a)(n.state.trip.steps);t.splice(e,1),n.setState({trip:Object(s.a)(Object(s.a)({},n.state.trip),{},{steps:t})})},n.addActivities=function(){if(n.state.inputActivities.activityPhoto&&n.state.inputActivities.activityTitle&&n.state.inputActivities.activityDescription){var e=Object(D.a)(n.state.trip.activities);e.push(n.state.inputActivities),n.setState({trip:Object(s.a)(Object(s.a)({},n.state.trip),{},{activities:e})}),n.setState({inputActivities:{activityPhoto:"",activityTitle:"",activityDescription:""}}),n.handleModal(!1)}},n.deleteActivities=function(e){var t=Object(D.a)(n.state.trip.activities);t.splice(e,1),n.setState({trip:Object(s.a)(Object(s.a)({},n.state.trip),{},{activities:t})})},n.cleanState=function(){n.setState({trip:{title:"",duration:"0",season:"",price:"0",image:"",steps:[],informationTitle:"",informationGallery:"",informationPriceIncludes:"",informationDescription:"",tripType:"",activities:[],destination:""}})},n.state={showModal:!1,trip:{title:"",duration:"0",season:"",price:"0",image:"",steps:[],informationTitle:"",informationGallery:"",informationPriceIncludes:"",informationDescription:"",tripType:"",activities:[],destination:""},inputSteps:"",inputActivities:{activityPhoto:"",activityTitle:"",activityDescription:""}},n.TripService=new F,n.filesService=new _,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(k.a,{className:"my-5"},r.a.createElement("h1",null,"Viaje nuevo"),r.a.createElement(U.a,{onSubmit:this.handleFormSubmit},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Imagen Viaje"),r.a.createElement(U.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"T\xedtulo"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.trip.title,name:"title",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Duraci\xf3n"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.trip.duration,name:"duration",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Temporada"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.trip.season,name:"season",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Precio"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.trip.price,name:"price",type:"number"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Titulo informaci\xf3n"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.trip.informationTitle,name:"informationTitle",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"\xbfQu\xe9 incluye el precio?"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.trip.informationPriceIncludes,name:"informationPriceIncludes",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Descripci\xf3n del Viaje"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.trip.informationDescription,name:"informationDescription",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Tipo de Viaje"),r.a.createElement(U.a.Control,{as:"select",onChange:this.handleInputChange,value:this.state.trip.tripType,name:"tripType"},r.a.createElement("option",{value:""},"Selecciona tipo de viaje"),r.a.createElement("option",{value:"single"},"Single"),r.a.createElement("option",{value:"grupos"},"Grupos"),r.a.createElement("option",{value:"grupo-reducido"},"Grupos reducidos"))),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Destino"),r.a.createElement(U.a.Control,{as:"select",onChange:this.handleInputChange,value:this.state.trip.destination,name:"destination"},r.a.createElement("option",{value:""},"Selecciona un destino"),r.a.createElement("option",{value:"europa"},"Europa"),r.a.createElement("option",{value:"asia"},"Asia"),r.a.createElement("option",{value:"america"},"Am\xe9rica"))),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Paradas del viaje"),r.a.createElement("div",{className:"d-flex"},r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.inputSteps,name:"inputSteps",type:"text",style:{width:"50%"}}),r.a.createElement(O.a,{variant:"info",onClick:this.addTripSteps,className:"ml-5 w-50"},"A\xf1adir parada"))),r.a.createElement("div",null,this.state.trip.steps.map((function(t,a){return r.a.createElement(O.a,{variant:"outline-secondary",className:"mr-3",key:a,onClick:function(){return e.deleteStep(a)}}," ",t," ")}))),r.a.createElement(O.a,{className:"mb-3 d-block",onClick:function(){return e.handleModal(!0)},variant:"dark",size:"sm",style:{marginBottom:"20px"}},"Crear actividad"),r.a.createElement(T.a,null,this.state.trip.activities.map((function(t,a){return r.a.createElement(w.a,{key:a,md:4},r.a.createElement(z,t),r.a.createElement(O.a,{variant:"danger",className:"mr-3",onClick:function(){return e.deleteActivities(a)}},"Eliminar actividad"))}))),r.a.createElement(O.a,{variant:"dark",className:"mt-3",type:"submit"},"Crear Viaje")),r.a.createElement(P.a,{size:"lg",show:this.state.showModal,onHide:function(){return e.handleModal(!1)}},r.a.createElement(P.a.Body,null,r.a.createElement("h1",null,"Actividades"),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"T\xedtulo actividad"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.inputActivities.activityTitle,name:"activityTitle",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Descripci\xf3n de la actividad"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.inputActivities.activityDescription,name:"activityDescription",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Imagen de la actividad"),r.a.createElement(U.a.Control,{name:"activityPhototrip",type:"file",onChange:function(t){return e.handleFileUpload(t,"photo")}})),r.a.createElement(O.a,{className:"mb-3 d-block",onClick:this.addActivities,variant:"dark",size:"sm",style:{marginBottom:"20px"}},"A\xf1adir actividad"))))}}]),a}(n.Component),q=(a(115),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getDestination(),window.scrollTo(0,0)},n.getDestination=function(){var e=n.props.match.params.destino_id;n.TripService.getDestination(e).then((function(e){return n.setState({destination:e.data})})).catch((function(e){return console.log(e)}))},n.deleteTrips=function(e){n.TripService.deleteTrips(e).then((function(){return n.getDestination()})).catch((function(e){return console.log(e)}))},n.state={destination:[],background:{europa:"https://cdn.civitatis.com/suiza/zurich/zurich.jpg",asia:"https://www.uch.edu.pe/sites/default/files/styles/blog_image/public/blog-img/japon.png?itok=2hT_8nhU",america:"https://staticshare.america.gov/uploads/2018/01/shutterstock_421599727.jpg"}},n.TripService=new F,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.match.params.destino_id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"continente",style:{backgroundImage:"url(".concat(this.state.background[t],")")}},r.a.createElement("h1",{className:"text-center"},t)),r.a.createElement(T.a,null,this.state.destination.map((function(t,a){return r.a.createElement(w.a,{md:6,lg:4,key:a},r.a.createElement(L,t),e.props.loggedInUser&&"admin"===e.props.loggedInUser.role?r.a.createElement(O.a,{variant:"danger",className:"mb-5 mr-5",onClick:function(){return e.deleteTrips(t._id)}},"Eliminar viaje"):null)}))),r.a.createElement(M,null))}}]),a}(n.Component)),H=(a(116),function e(){var t=this;Object(o.a)(this,e),this.createTrips=function(e){return t.service.post("/newBooking",e)},this.service=h.a.create({baseURL:"".concat("https://viajar-mola-react.herokuapp.com/api","/booking"),withCredentials:!0})}),Q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.loggedInUser&&n.setState(Object(s.a)(Object(s.a)({},n.state),{},{user:{email:n.props.loggedInUser.email||"",phone:n.props.loggedInUser.phone||"",name:n.props.loggedInUser.name||"",lastname:n.props.loggedInUser.lastname||""}}))},n.handleInputChange=function(e){n.setState({error:""});var t=e.target,a=t.name,r=t.value;n.setState({user:Object(s.a)(Object(s.a)({},n.state.user),{},Object(I.a)({},a,r))})},n.handleFormSubmit=function(e){e.preventDefault(),n.state.user.email&&n.state.user.phone&&n.state.user.name&&n.state.user.lastname?(n.BookingService.createTrips({user:n.props.loggedInUser._id,trip:n.props.tripId}).then((function(e){var t=n.props.loggedInUser.booking;t.push(e.data._id),n.UserService.editUser(n.props.loggedInUser._id,{booking:t,email:n.state.user.email,phone:n.state.user.phone,name:n.state.user.name,lastname:n.state.user.lastname}).then((function(){return n.props.fetchUser()}))})).catch((function(e){return n.setState({error:e})})),n.props.handleModal(!1),n.props.handleToast(!0,"Tu viaje ha sido reservado")):n.setState({error:"Todos los campos son obligatorios"})},n.state={user:{email:"",phone:"",name:"",lastname:""},error:""},n.BookingService=new H,n.UserService=new B,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Formulario de Reserva"),r.a.createElement(U.a,{onSubmit:this.handleFormSubmit},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Correo electr\xf3nico"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.user.email,name:"email",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Telefono"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.user.phone,name:"phone",type:"number"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Name"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.user.name,name:"name",type:"text"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Apellido"),r.a.createElement(U.a.Control,{onChange:this.handleInputChange,value:this.state.user.lastname,name:"lastname",type:"text"})),this.state.error&&r.a.createElement("p",{className:"alert alert-danger"},this.state.error),r.a.createElement(O.a,{variant:"dark",type:"submit"},"Hacer reserva")))}}]),a}(n.Component),W=(a(117),function(){return r.a.createElement("div",{className:"sk-chase"},r.a.createElement("div",{className:"sk-chase-dot"}),r.a.createElement("div",{className:"sk-chase-dot"}),r.a.createElement("div",{className:"sk-chase-dot"}),r.a.createElement("div",{className:"sk-chase-dot"}),r.a.createElement("div",{className:"sk-chase-dot"}),r.a.createElement("div",{className:"sk-chase-dot"}))}),J=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){window.scrollTo(0,0);var e=n.props.match.params.trips_id;n.TripService.getOneTrips(e).then((function(e){return n.setState({tripDetails:e.data})})).catch((function(e){return console.log(e)}))},n.handleModal=function(e){return n.setState({showModal:e})},n.state={showModal:!1,tripDetails:null},n.TripService=new F,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state.tripDetails&&this.state.tripDetails.informationPriceIncludes.split(".");return r.a.createElement(r.a.Fragment,null,this.state.tripDetails?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"viajeDestino",style:{backgroundImage:"url(".concat(this.state.tripDetails.image,")")}},r.a.createElement("div",null,r.a.createElement("h1",null,this.state.tripDetails.title),r.a.createElement("h3",null,this.state.tripDetails.duration," d\xedas |  p/p desde ",this.state.tripDetails.price,"\u20ac |  temporada ",this.state.tripDetails.season," | ",this.state.tripDetails.tripType),r.a.createElement("h3",null,this.state.tripDetails.steps.map((function(e,t){return r.a.createElement("span",{key:t}," ",e," |")}))," ")),this.props.loggedInUser?r.a.createElement(O.a,{className:"px-5 mx-auto mt-3 text-uppercase",onClick:function(){return e.handleModal(!0)},variant:"warning"},"Reserva viaje"):r.a.createElement(O.a,{className:"px-5 mx-auto mt-3 text-uppercase",onClick:function(){return e.props.history.push("/iniciar-sesion")},variant:"warning"},"Inicia sesi\xf3n para reservar")),r.a.createElement(k.a,null,r.a.createElement("div",{className:"informacion"},r.a.createElement("h2",null,"- Un viaje diferente -"),r.a.createElement("h3",null,this.state.tripDetails.informationTitle," "),r.a.createElement("p",null,this.state.tripDetails.informationDescription," "),r.a.createElement("h3",{className:"my-4"},"El precio incluye"),r.a.createElement("ul",null,t?t.map((function(e,t){return r.a.createElement("li",{key:t},e,".")})):null))),r.a.createElement("div",{className:"actividades my-5"},r.a.createElement("h2",null,"ACTIVIDADES DESTACADAS"),r.a.createElement(T.a,null,this.state.tripDetails.activities.map((function(e,t){return r.a.createElement(w.a,{md:6,lg:4,key:t},r.a.createElement(z,e))}))))):r.a.createElement(W,null),r.a.createElement(P.a,{size:"lg",show:this.state.showModal,onHide:function(){return e.handleModal(!1)}},r.a.createElement(P.a.Body,null,r.a.createElement(Q,{fetchUser:this.props.fetchUser,handleToast:this.props.handleToast,handleModal:this.handleModal,loggedInUser:this.props.loggedInUser,tripId:this.state.tripDetails&&this.state.tripDetails._id}))))}}]),a}(n.Component),X=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).componentDidMount=function(){return e.fetchUser()},e.setTheUser=function(t){return e.setState({loggedInUser:t},(function(){return console.log("El estado de App ha cambiado:",e.state)}))},e.fetchUser=function(){e.AuthService.isLoggedIn().then((function(t){return e.setState({loggedInUser:t.data})})).catch((function(e){return console.log({err:e})}))},e.handleToast=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(s.a)({},e.state.toast);n={visible:t,text:a},e.setState({toast:n})},e.state={loggedInUser:null,toast:{visible:!1,text:""}},e.AuthService=new d,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser,handleToast:this.handleToast}),r.a.createElement("main",null,r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",render:function(){return r.a.createElement(G,null)}}),r.a.createElement(g.b,{path:"/mi-cuenta",render:function(){return e.state.loggedInUser?r.a.createElement(R,{loggedInUser:e.state.loggedInUser,handleToast:e.handleToast}):r.a.createElement(g.a,{to:"/registro"})}}),r.a.createElement(g.b,{path:"/registro",render:function(t){return r.a.createElement(x,Object.assign({},t,{setTheUser:e.setTheUser,handleToast:e.handleToast}))}}),r.a.createElement(g.b,{path:"/iniciar-sesion",render:function(t){return r.a.createElement(N,Object.assign({},t,{setTheUser:e.setTheUser,handleToast:e.handleToast}))}}),r.a.createElement(g.b,{path:"/nuevo-viaje",render:function(t){return e.state.loggedInUser&&"admin"===e.state.loggedInUser.role?r.a.createElement(V,Object.assign({},t,{handleToast:e.handleToast})):r.a.createElement(g.a,{to:"/"})}}),r.a.createElement(g.b,{path:"/destino/:destino_id",render:function(t){return r.a.createElement(q,Object.assign({},t,{loggedInUser:e.state.loggedInUser}))}}),r.a.createElement(g.b,{path:"/viaje/:trips_id",render:function(t){return r.a.createElement(J,Object.assign({handleToast:e.handleToast,loggedInUser:e.state.loggedInUser,fetchUser:e.fetchUser},t))}}))),r.a.createElement(S,null),r.a.createElement(j,Object.assign({},this.state.toast,{handleToast:this.handleToast})))}}]),a}(n.Component);l.a.render(r.a.createElement(b.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null))),document.getElementById("root"))},83:function(e,t,a){e.exports=a(118)},88:function(e,t,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.edd0f59e.chunk.js.map