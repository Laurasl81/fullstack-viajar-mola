(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(26),o=a.n(r),s=a(35),c=a(11),i=a(15),u=a(17),m=a(16),h=(a(79),a(39)),p=a.n(h),d=function e(){var t=this;Object(c.a)(this,e),this.login=function(e){return t.service.post("/login",e)},this.signup=function(e){return t.service.post("/signup",e)},this.logout=function(){return t.service.post("/logout")},this.isLoggedIn=function(){return t.service.get("/loggedin")},this.service=p.a.create({baseURL:"".concat("http://myapp.herokuapp.com/api","/auth"),withCredentials:!0})},g=a(7),E=a(111),v=a(112),b=a(110),f=a(8),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).logout=function(){n.AuthService.logout().then((function(){n.props.setTheUser(!1),n.props.handleToast(!0,"Usuario desconectado")})).catch((function(e){return console.log(e)}))},n.AuthService=new d,n}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(E.a,{className:"nav-hero",variant:"dark",expand:"lg",sticky:"top"},l.a.createElement(E.a.Brand,null,l.a.createElement(f.b,{to:"/"},l.a.createElement("img",{className:"logo",src:"/img/image.png",alt:"#"}))),l.a.createElement(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(E.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(v.a,{className:"ml-auto"},l.a.createElement(v.a.Link,{as:"span"},l.a.createElement(f.c,{to:"/",exact:!0,activeStyle:{color:"white"}},"Inicio")),l.a.createElement(v.a.Link,{as:"span"},l.a.createElement(f.c,{to:"/destino",activeStyle:{color:"white"}},"Destino")),l.a.createElement(b.a,{title:"Destinos",id:"basic-nav-dropdown"},l.a.createElement(b.a.Item,{href:"/destino/europa"},"Europa"),l.a.createElement(b.a.Divider,null),l.a.createElement(b.a.Item,{href:"/destino/asia"},"Asia"),l.a.createElement(b.a.Divider,null),l.a.createElement(b.a.Item,{href:"/destino/america"},"America")),l.a.createElement(v.a.Link,{as:"span"},l.a.createElement(f.c,{to:"/#",exact:!0},"Sobre Nosotros")),l.a.createElement(v.a.Link,{as:"span"},l.a.createElement(f.c,{to:"/#",exact:!0},l.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-telephone-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{fillRule:"evenodd",d:"M2.267.98a1.636 1.636 0 0 1 2.448.152l1.681 2.162c.309.396.418.913.296 1.4l-.513 2.053a.636.636 0 0 0 .167.604L8.65 9.654a.636.636 0 0 0 .604.167l2.052-.513a1.636 1.636 0 0 1 1.401.296l2.162 1.681c.777.604.849 1.753.153 2.448l-.97.97c-.693.693-1.73.998-2.697.658a17.47 17.47 0 0 1-6.571-4.144A17.47 17.47 0 0 1 .639 4.646c-.34-.967-.035-2.004.658-2.698l.97-.969z"}))," +34 666 666")),this.props.loggedInUser?l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a.Link,{as:"span"},l.a.createElement(f.c,{to:"/mi-cuenta",activeStyle:{color:"white"}},"Mi cuenta")),l.a.createElement(v.a.Link,{as:"span"},l.a.createElement("span",{onClick:this.logout},"Cerrar sesi\xf3n"))):l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a.Link,{as:"span"},l.a.createElement(f.c,{to:"/registro",activeStyle:{color:"white"}},"Registro")),l.a.createElement(v.a.Link,{as:"span"},l.a.createElement(f.c,{to:"/iniciar-sesion",activeStyle:{color:"white"}},"Inicio sesi\xf3n"))),l.a.createElement(v.a.Link,{as:"span"},l.a.createElement(f.c,{to:"/mi-cuenta",activeStyle:{color:"white"}},"Hola, ",this.props.loggedInUser?this.props.loggedInUser.email:"invitado")))))}}]),a}(n.Component),U=a(51),I=function(e){var t=e.visible,a=e.text,n=e.handleToast;return l.a.createElement(U.a,{style:{position:"fixed",right:"10px",bottom:"10px",width:"300px"},show:t,onClose:function(){return n(!1)},delay:5e3,autohide:!0},l.a.createElement(U.a.Header,null," ",l.a.createElement("strong",{className:"mr-auto"},"ViajarMola")," "),l.a.createElement(U.a.Body,null,a))},j=(a(104),a(31)),T=function(){return l.a.createElement("footer",null,l.a.createElement(j.a,null,l.a.createElement("div",{className:"col-lg-4 col-sm-3 col-6 text-xs-center "},l.a.createElement("ul",null,l.a.createElement("li",null,"+34 666 666"),l.a.createElement("li",null,"viajarmola@viajarmola.com"),l.a.createElement("li",null,"Lun - Vie: 10h-18h"))),l.a.createElement("div",{className:"col-lg-4 col-sm-3 col-6 text-xs-center "},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(f.b,{to:"#"},"Preguntas frecuentes")),l.a.createElement("li",null,l.a.createElement(f.b,{to:"#"},"Politica de privacidad")),l.a.createElement("li",null,l.a.createElement(f.b,{to:"#"},"Condiciones generales")))),l.a.createElement("div",{className:"col-lg-4 col-sm-3 col-6 text-xs-center "},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(f.b,{to:"#"},"Aviso legal")),l.a.createElement("li",null,l.a.createElement(f.b,{to:"#"},"Recomendar a un amigo")),l.a.createElement("li",null,l.a.createElement(f.b,{to:"#"},"Viajes pasados"))))))},x=a(23),O=a(24),S=a(6),w=a(48),y=a(32),k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(x.a)({},a,l))},n.handleFormSubmit=function(e){e.preventDefault(),n.authService.signup(n.state).then((function(e){n.props.setTheUser(e.data),n.props.handleToast(!0,"Registro completo"),n.props.history.push("/mi-cuenta")})).catch((function(e){n.props.handleToast(!0,e.response.data.message)}))},n.state={email:"",password:""},n.authService=new d,n}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(w.a,null,l.a.createElement(j.a,null,l.a.createElement(y.a,{md:{offset:3,span:6}},l.a.createElement("h3",null,"Registro de usuario"),l.a.createElement(S.a,{onSubmit:this.handleFormSubmit},l.a.createElement(S.a.Group,null,l.a.createElement(S.a.Label,null,"Correo electr\xf3nico"),l.a.createElement(S.a.Control,{onChange:this.handleInputChange,value:this.state.email,name:"email",type:"text"}),l.a.createElement(S.a.Text,{className:"text-muted"},"Todo minuscula")),l.a.createElement(S.a.Group,null,l.a.createElement(S.a.Label,null,"Contrase\xf1a"),l.a.createElement(S.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password"}),l.a.createElement(S.a.Text,{className:"text-muted"},"Minimo cuatro caracteres")),l.a.createElement(O.a,{variant:"dark",type:"submit"},"Registrarme")))))}}]),a}(n.Component),L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(x.a)({},a,l))},n.handleFormSubmit=function(e){e.preventDefault(),n.AuthService.login(n.state).then((function(e){n.props.setTheUser(e.data),n.props.handleToast(!0,"Sesi\xf3n inciada"),n.props.history.push("/mi-cuenta")})).catch((function(e){n.props.handleToast(!0,e.response.data.message)}))},n.state={email:"",password:""},n.AuthService=new d,n}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,null,l.a.createElement(j.a,null,l.a.createElement(y.a,{md:{offset:3,span:6}},l.a.createElement("h3",null,"Inicio de sesi\xf3n"),l.a.createElement(S.a,{onSubmit:this.handleFormSubmit},l.a.createElement(S.a.Group,null,l.a.createElement(S.a.Label,null,"Correo electr\xf3nico"),l.a.createElement(S.a.Control,{onChange:this.handleInputChange,value:this.state.email,name:"email",type:"text"}),l.a.createElement(S.a.Text,{className:"text-muted"},"Todo minuscula")),l.a.createElement(S.a.Group,null,l.a.createElement(S.a.Label,null,"Contrase\xf1a"),l.a.createElement(S.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password"}),l.a.createElement(S.a.Text,{className:"text-muted"},"Minimo cuatro caracteres")),l.a.createElement(O.a,{variant:"dark",type:"submit"},"Iniciar sesion"))))))}}]),a}(n.Component),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"text-center"},"Home"))}}]),a}(n.Component),A=function e(){var t=this;Object(c.a)(this,e),this.getUser=function(e){return t.service.get("/account/".concat(e))},this.deleteUser=function(e){return t.service.delete("/account/delete/".concat(e))},this.editUser=function(e,a){return t.service.put("/account/edit/".concat(e),a)},this.service=p.a.create({baseURL:"".concat("http://myapp.herokuapp.com/api","/user"),withCredentials:!0})},F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){console.log(n.props),n.props.loggedInUser&&n.setState(Object(s.a)(Object(s.a)({},n.state),{},{user:{email:n.props.loggedInUser.email?n.props.loggedInUser.email:"",phone:n.props.loggedInUser.phone?n.props.loggedInUser.phone:"",name:n.props.loggedInUser.name?n.props.loggedInUser.name:"",lastname:n.props.loggedInUser.lastname?n.props.loggedInUser.lastname:""}}))},n.handleInputChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState({user:Object(x.a)({},a,l)})},n.handleFormSubmit=function(e){console.log(n.state),e.preventDefault(),n.UserService.editUser(n.props.loggedInUser._id,n.state.user).then((function(e){n.props.handleToast(!0,"Usuario modificado")})).catch((function(e){n.props.handleToast(!0,e.response.data.message)}))},n.state={user:{email:"",phone:"",name:"",lastname:""}},n.UserService=new A,n}return Object(i.a)(a,[{key:"render",value:function(){return console.log("props",this.props),l.a.createElement(w.a,null,l.a.createElement("h1",null,"Hola profile"),l.a.createElement(S.a,{onSubmit:this.handleFormSubmit},l.a.createElement(S.a.Group,null,l.a.createElement(S.a.Label,null,"Correo electr\xf3nico"),l.a.createElement(S.a.Control,{onChange:this.handleInputChange,value:this.state.user.email,name:"email",type:"text"})),l.a.createElement(S.a.Group,null,l.a.createElement(S.a.Label,null,"Telefono"),l.a.createElement(S.a.Control,{onChange:this.handleInputChange,value:this.state.user.phone,name:"phone",type:"number"})),l.a.createElement(S.a.Group,null,l.a.createElement(S.a.Label,null,"Name"),l.a.createElement(S.a.Control,{onChange:this.handleInputChange,value:this.state.user.name,name:"name",type:"text"})),l.a.createElement(S.a.Group,null,l.a.createElement(S.a.Label,null,"Apellido"),l.a.createElement(S.a.Control,{onChange:this.handleInputChange,value:this.state.user.lastname,name:"lastname",type:"text"})),l.a.createElement(O.a,{variant:"dark",type:"submit"},"Editar usuario")))}}]),a}(n.Component),D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){return e.fetchUser()},e.setTheUser=function(t){return e.setState({loggedInUser:t},(function(){return console.log("El estado de App ha cambiado:",e.state)}))},e.fetchUser=function(){e.AuthService.isLoggedIn().then((function(t){return null===e.state.loggedInUser&&e.setState({loggedInUser:t.data})})).catch((function(e){return console.log({err:e})}))},e.handleToast=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(s.a)({},e.state.toast);n={visible:t,text:a},e.setState({toast:n})},e.state={loggedInUser:null,toast:{visible:!1,text:""}},e.AuthService=new d,e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(C,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser,handleToast:this.handleToast}),l.a.createElement("main",null,l.a.createElement(g.d,null,l.a.createElement(g.b,{exact:!0,path:"/",render:function(){return l.a.createElement(N,null)}}),l.a.createElement(g.b,{path:"/mi-cuenta",render:function(){return e.state.loggedInUser?l.a.createElement(F,{loggedInUser:e.state.loggedInUser,handleToast:e.handleToast}):l.a.createElement(g.a,{to:"/registro"})}}),l.a.createElement(g.b,{path:"/registro",render:function(t){return l.a.createElement(k,Object.assign({},t,{setTheUser:e.setTheUser,handleToast:e.handleToast}))}}),l.a.createElement(g.b,{path:"/iniciar-sesion",render:function(t){return l.a.createElement(L,Object.assign({},t,{setTheUser:e.setTheUser,handleToast:e.handleToast}))}})),l.a.createElement(T,null)),l.a.createElement(I,Object.assign({},this.state.toast,{handleToast:this.handleToast})))}}]),a}(n.Component);o.a.render(l.a.createElement(f.a,null,l.a.createElement(l.a.StrictMode,null,l.a.createElement(D,null))),document.getElementById("root"))},74:function(e,t,a){e.exports=a(105)},79:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.17deff2c.chunk.js.map